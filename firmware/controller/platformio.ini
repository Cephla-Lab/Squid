[platformio]
src_dir = .
include_dir = src
test_dir = test

[env:teensy41]
platform = teensy
board = teensy41
framework = arduino

; Build flags
build_flags =
    -D ARDUINO_TEENSY41
    -I src

; Exclude test directory from firmware build
build_src_filter =
    +<*>
    -<test/>

; Library dependencies
lib_deps =
    fastled/FastLED@^3.6.0
    bakercp/PacketSerial@^1.4.0

; Upload settings
upload_protocol = teensy-cli

; Monitor settings
monitor_speed = 2000000

; Native test environment (runs on host machine)
[env:native]
platform = native
build_flags =
    -I src
    -std=c++11
; Build only generic utility sources for host tests (no Arduino/Teensy dependencies).
; All host-testable modules under src/utils/ will be included automatically.
build_src_filter =
    -<*>
    +<src/utils/*.cpp>
